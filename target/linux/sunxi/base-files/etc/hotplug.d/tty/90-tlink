#!/bin/sh

. /lib/functions.sh

[ "$ACTION" = add ] || [ "$ACTION" = remove ] || exit 0

board=$(board_name)

tlink_m408_xr_usb() {
	case "$DEVICENAME" in
		ttyXRUSB0)
			rm /dev/ttyS5
			ln -s /dev/$DEVICENAME /dev/ttyS5
			;;
		ttyXRUSB1)
			rm /dev/ttyS6
			ln -s /dev/$DEVICENAME /dev/ttyS6
			;;
		ttyXRUSB2)
			rm /dev/ttyS7
			ln -s /dev/$DEVICENAME /dev/ttyS7
			;;
		ttyXRUSB3)
			rm /dev/ttyS8
			ln -s /dev/$DEVICENAME /dev/ttyS8
			;;
	esac
}

tlink_k1_wk_spi() {
	case "$DEVICENAME" in
		ttySWK0)
			rm /dev/ttyS7
			ln -s /dev/$DEVICENAME /dev/ttyS7
			;;
		ttySWK1)
			rm /dev/ttyS8
			ln -s /dev/$DEVICENAME /dev/ttyS8
			;;
	esac
}

case $board in
kooiot,tlink-m408)
	tlink_m408_xr_usb
	;;
kooiot,tlink-k1)
	tlink_k1_wk_spi
	;;
esac

