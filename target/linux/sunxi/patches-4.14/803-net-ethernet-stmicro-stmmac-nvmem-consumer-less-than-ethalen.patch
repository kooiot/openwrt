--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_platform.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_platform.c
@@ -366,15 +366,37 @@
 {
 	struct nvmem_cell *cell;
 	size_t cell_size;
+	char *cell_data;
 	char *mac;
+	int i = 0;
 
 	cell = nvmem_cell_get(dev, "mac-address");
 	if (IS_ERR(cell))
 		return NULL;
 
-	mac = nvmem_cell_read(cell, &cell_size);
+	cell_data = nvmem_cell_read(cell, &cell_size);
 	nvmem_cell_put(cell);
 
+	for (; i < cell_size; i++) {
+		if (cell_data[i] != 0x0)
+			break;
+	}
+
+	if (i == cell_size || cell_size < 4) {
+		kfree(cell_data);
+		return NULL;
+	}
+
+	if(cell_size >=4 && cell_size < ETH_ALEN) {
+		mac = kzalloc(ETH_ALEN, GFP_KERNEL);
+		mac[0] = 0x1E;
+		mac[1] = 0x4B;
+		memcpy(mac + ETH_ALEN - cell_size, cell_data, cell_size);
+		kfree(cell_data);
+	} else {
+		mac = cell_data;
+	}
+
 	return mac;
 }
 

