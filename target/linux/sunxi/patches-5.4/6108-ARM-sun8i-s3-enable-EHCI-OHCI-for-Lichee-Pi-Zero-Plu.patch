From 62c99bd6541ca28453d89e2754b52a8907312eae Mon Sep 17 00:00:00 2001
From: greedyhao <hao_kr@163.com>
Date: Tue, 10 Sep 2019 14:41:07 +0800
Subject: [PATCH 6108/6117] ARM: sun8i: s3: enable EHCI/OHCI for Lichee Pi Zero
 Plus

---
 arch/arm/boot/dts/sun8i-s3-lichee-zero-plus.dts | 10 +++++++++-
 arch/arm/configs/licheepi_zero_plus_defconfig   |  2 +-
 2 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/sun8i-s3-lichee-zero-plus.dts b/arch/arm/boot/dts/sun8i-s3-lichee-zero-plus.dts
index 81019c268e4e..9255f1e067a0 100644
--- a/arch/arm/boot/dts/sun8i-s3-lichee-zero-plus.dts
+++ b/arch/arm/boot/dts/sun8i-s3-lichee-zero-plus.dts
@@ -68,6 +68,10 @@
 	status = "okay";
 };
 
+&ehci0 {
+	status = "okay";
+};
+
 &pwm {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pwm0_pins>;
@@ -101,6 +105,10 @@
 	status = "okay";
 };
 
+&ohci0 {
+	status = "okay";
+};
+
 &uart0 {
 	pinctrl-0 = <&uart0_pb_pins>;
 	pinctrl-names = "default";
@@ -108,7 +116,7 @@
 };
 
 &usb_otg {
-	dr_mode = "peripheral";
+	dr_mode = "host";
 	status = "okay";
 };
 
diff --git a/arch/arm/configs/licheepi_zero_plus_defconfig b/arch/arm/configs/licheepi_zero_plus_defconfig
index 71824196f748..8c091e803056 100644
--- a/arch/arm/configs/licheepi_zero_plus_defconfig
+++ b/arch/arm/configs/licheepi_zero_plus_defconfig
@@ -2679,7 +2679,7 @@ CONFIG_USB_DEFAULT_PERSIST=y
 CONFIG_USB_OTG=y
 # CONFIG_USB_OTG_WHITELIST is not set
 # CONFIG_USB_OTG_BLACKLIST_HUB is not set
-CONFIG_USB_OTG_FSM=y
+# CONFIG_USB_OTG_FSM is not set
 # CONFIG_USB_LEDS_TRIGGER_USBPORT is not set
 CONFIG_USB_AUTOSUSPEND_DELAY=2
 # CONFIG_USB_MON is not set
-- 
2.30.2

